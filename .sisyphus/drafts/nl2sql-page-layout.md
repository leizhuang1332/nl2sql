# NL2SQL 智能问数项目 - 页面布局与最佳实践

## 页面布局规格

| 项目 | 选型 |
|------|------|
| **交互模式** | 分屏式 (左问右答) |
| **设计风格** | 清新轻盈 (Light) |
| **数据展示** | 表格 + 分页 + 虚拟滚动 + 图表 |
| **移动端** | 响应式适配 |
| **历史记录** | 需要 |

---

## 推荐页面布局

### 1. 主查询页面 (Split View)

```
┌─────────────────────────────────────────────────────────────────────────┐
│  [Logo] NL2SQL 智能问数                              [设置] [帮助]    │
├───────────────────────────────┬─────────────────────────────────────────┤
│                               │                                         │
│   🔍 请输入你的问题...        │   ┌─────────────────────────────────┐  │
│                               │   │  查询结果 (0.8s)                │  │
│   示例：                      │   ├─────────────────────────────────┤  │
│   • 上个月销售额是多少？       │   │                                 │  │
│   • 华东区客户数量            │   │   📊 数据表格                   │  │
│   • 同比增长最高的产品        │   │   ┌─────┬──────┬──────┬──────┐ │  │
│                               │   │  ID │ 名称 │ 销量 │ 增长率│ │  │
│   [历史记录]                  │   │─────┼──────┼──────┼──────┤ │  │
│   ├─ 昨天：上月销售额         │   │  1  │ A    │ 100  │ 15%  │ │  │
│   ├─ 前天：客户数量统计       │   │  2  │ B    │ 200  │ 25%  │ │  │
│   └─ 3天前：产品排名          │   │  3  │ C    │ 150  │ 18%  │ │  │
│                               │   │  ...│ ...  │ ...  │ ...  │ │  │
│                               │   └─────┴──────┴──────┴──────┘ │  │
│                               │                                 │  │
│   [执行查询] [清空]           │   📈 图表视图   📋 表格视图    │  │
│                               │                                         │
│   ┌─────────────────────────┐│   < 1 2 3 ... 100 >                │  │
│   │ 生成的 SQL               ││   共 1000 条记录                   │  │
│   │ SELECT ...               ││                                         │
│   │ [复制] [复制结果]         ││                                         │
│   └─────────────────────────┘│                                         │
│                               │                                         │
└───────────────────────────────┴─────────────────────────────────────────┘
         35%                              65%
```

### 2. 左侧面板 - 提问区 (35%)

| 区域 | 内容 |
|------|------|
| **搜索框** | 自然语言输入框，支持 placeholder 示例 |
| **示例问题** | 3-5 个快捷示例，点击即插入 |
| **历史记录** | 可折叠列表，支持点击重新执行 |
| **操作按钮** | 执行查询、清空输入 |

### 3. 右侧面板 - 结果区 (65%)

| 区域 | 内容 |
|------|------|
| **执行信息** | 查询耗时、返回行数 |
| **Tab 切换** | 表格视图 / 图表视图 |
| **数据表格** | 支持排序、筛选、分页 |
| **图表** | 柱状图、折线图、饼图（自动推荐） |
| **SQL 预览** | 可折叠，显示生成的 SQL |

---

## 最佳实践建议

### 响应式断点

```
桌面端:     >= 1200px    (左右分屏 35% / 65%)
平板横屏:   768-1199px  (上下布局，提问在上)
平板竖屏:   480-767px   (上下布局，简化操作)
手机:       < 480px     (纯提问模式，结果新页面展示)
```

### 性能优化

| 优化点 | 实践 |
|--------|------|
| **首屏加载** | < 1.5s，使用 Skeleton 加载 |
| **查询响应** | < 3s，显示加载动画 + 预估时间 |
| **大数据** | 虚拟滚动，> 1000 行自动启用 |
| **图片/图表** | 按需加载，懒加载 |

### 交互细节

| 场景 | 最佳实践 |
|------|----------|
| **输入中** | 实时校验，显示 SQL 预览 |
| **执行中** | 禁用按钮，显示 loading 状态 |
| **成功** | 绿色提示，震动反馈（移动端） |
| **失败** | 红色报错，显示错误原因 + 修复建议 |
| **空结果** | 友好提示，引导用户调整问题 |

### 数据脱敏展示

| 字段类型 | 脱敏效果 | 示例 |
|----------|----------|------|
| 手机号 | 中间4位隐藏 | 138****1234 |
| 身份证 | 出生日期隐藏 | 110***********1234 |
| 银行卡 | 仅显示后4位 | **** **** **** 1234 |
| 姓名 | 脱敏处理 | 张* |

### 无障碍设计 (A11y)

- 键盘导航支持
- ARIA 标签
- 颜色对比度 >= 4.5:1
- 焦点指示器清晰可见

---

## 技术实现建议

| 组件 | 推荐方案 |
|------|----------|
| **UI 框架** | React + Ant Design (企业级组件) |
| **表格** | TanStack Table (headless) + Ant Design Table |
| **图表** | ECharts 或 Recharts |
| **状态管理** | Zustand 或 React Query |
| **拖拽/布局** | dnd-kit 或 react-grid-layout |

---

## 页面流程图

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   首页      │────▶│  查询页      │────▶│  结果页      │
│  (跳转)     │     │  (主页面)    │     │  (Tab切换)   │
└─────────────┘     └──────┬──────┘     └──────┬──────┘
                           │                    │
                           ▼                    ▼
                    ┌─────────────┐       ┌─────────────┐
                    │  SQL预览    │       │  详情页      │
                    │  (弹窗)     │       │  (导出/分析)  │
                    └─────────────┘       └─────────────┘
```

---

*页面布局确认完成：2026-02-14*
