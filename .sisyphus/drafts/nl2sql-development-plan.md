# NL2SQL 智能问数项目 - 开发计划

## 项目概览

| 项目 | 信息 |
|------|------|
| **项目名称** | NL2SQL 智能问数 |
| **技术栈** | Python + FastAPI + React + LangChain |
| **部署方式** | Docker Compose |
| **目标用户** | 全员（业务/分析/管理层） |
| **预期周期** | 4-6 周（敏捷迭代） |

---

## 任务拆解

### Phase 1: 项目初始化 (第1周)

| 序号 | 任务 | 优先级 | 预估工时 |
|------|------|--------|----------|
| 1.1 | 创建代码仓库，初始化 Git | P0 | 0.5h |
| 1.2 | 搭建后端项目结构 (FastAPI) | P0 | 1h |
| 1.3 | 搭建前端项目结构 (React + Vite) | P0 | 1h |
| 1.4 | 配置 Docker Compose 开发环境 | P0 | 2h |
| 1.5 | 配置 ESLint、Prettier、TypeScript | P1 | 1h |
| 1.6 | 搭建数据库连接池（MySQL/PG/Oracle） | P1 | 2h |
| 1.7 | 配置日志系统 | P1 | 1h |

**里程碑**: 本地开发环境可运行

---

### Phase 2: 后端核心 (第2周)

| 序号 | 任务 | 优先级 | 预估工时 |
|------|------|--------|----------|
| 2.1 | 数据库连接层封装（SQLAlchemy） | P0 | 4h |
| 2.2 | 表结构元数据获取服务 | P0 | 4h |
| 2.3 | LangChain NL2SQL 引擎集成 | P0 | 8h |
| 2.4 | SQL 执行与结果返回 | P0 | 4h |
| 2.5 | 数据脱敏服务 | P0 | 4h |
| 2.6 | 错误处理与异常捕获 | P1 | 2h |

**里程碑**: API 可接收自然语言，返回脱敏后的查询结果

---

### Phase 3: 后端增强 (第3周)

| 序号 | 任务 | 优先级 | 预估工时 |
|------|------|--------|----------|
| 3.1 | 审计日志服务 | P1 | 4h |
| 3.2 | 查询历史记录 API | P1 | 4h |
| 3.3 | 性能优化（缓存、连接池） | P1 | 4h |
| 3.4 | API 限流与安全加固 | P2 | 4h |
| 3.5 | 单元测试编写 | P1 | 8h |

**里程碑**: 完整的查询链路 + 审计追踪

---

### Phase 4: 前端开发 (第3-4周)

| 序号 | 任务 | 优先级 | 预估工时 |
|------|------|--------|----------|
| 4.1 | 项目初始化 + Ant Design 集成 | P0 | 2h |
| 4.2 | 分屏布局实现（提问区 + 结果区） | P0 | 4h |
| 4.3 | 自然语言输入组件 | P0 | 2h |
| 4.4 | 示例问题快捷入口 | P1 | 2h |
| 4.5 | 数据表格组件（分页、排序） | P0 | 4h |
| 4.6 | 虚拟滚动（大数据量） | P1 | 4h |
| 4.7 | 图表可视化（ECharts） | P1 | 6h |
| 4.8 | SQL 预览组件 | P1 | 2h |
| 4.9 | 加载/错误状态处理 | P1 | 2h |

**里程碑**: 完整的前端交互界面

---

### Phase 5: 前端增强 (第4周)

| 序号 | 任务 | 优先级 | 预估工时 |
|------|------|--------|----------|
| 5.1 | 历史记录功能 | P1 | 4h |
| 5.2 | 响应式适配（移动端） | P1 | 4h |
| 5.3 | 主题切换（Light/Dark） | P2 | 2h |
| 5.4 | 国际化支持 | P2 | 2h |
| 5.5 | 性能优化（懒加载、骨架屏） | P1 | 4h |

**里程碑**: 完整功能的前端应用

---

### Phase 6: 集成测试 (第5周)

| 序号 | 任务 | 优先级 | 预估工时 |
|------|------|--------|----------|
| 6.1 | 前后端联调 | P0 | 8h |
| 6.2 | 端到端测试 | P0 | 8h |
| 6.3 | 性能测试（< 3秒） | P0 | 4h |
| 6.4 | 安全测试（SQL注入等） | P1 | 4h |
| 6.5 | Bug 修复与优化 | P0 | 8h |

**里程碑**: 可提交验收

---

### Phase 7: 部署上线 (第6周)

| 序号 | 任务 | 优先级 | 预估工时 |
|------|------|--------|----------|
| 7.1 | Docker Compose 生产配置 | P0 | 4h |
| 7.2 | CI/CD 流水线搭建 | P1 | 8h |
| 7.3 | 监控告警配置 | P1 | 4h |
| 7.4 | 文档编写（使用手册、API） | P1 | 4h |
| 7.5 | 部署验收 | P0 | 4h |

**里程碑**: 项目上线

---

## 甘特图概览

```
周数:       1    2    3    4    5    6
            │    │    │    │    │    │
初始化     ██████
后端核心   ░░░░██████████
后端增强   ░░░░░░░░░████████
前端开发   ░░░░░░░░░████████████
前端增强   ░░░░░░░░░░░░░░░████████
集成测试   ░░░░░░░░░░░░░░░░░░░████████
部署上线   ░░░░░░░░░░░░░░░░░░░░░░░████
```

---

## 里程碑检查点

| 阶段 | 里程碑 | 验收标准 |
|------|--------|----------|
| Week 1 | 开发环境就绪 | 本地可运行，前后端互通 |
| Week 2 | 核心 API 完成 | 自然语言可查询，返回结果 |
| Week 3 | 功能初具规模 | 前后端完整链路 + 审计 |
| Week 4 | UI 功能完整 | 所有页面和组件可用 |
| Week 5 | 测试通过 | 性能 < 3s，无严重 Bug |
| Week 6 | 上线交付 | 部署完成，文档齐全 |

---

## 技术债务预留

每个迭代预留 **20% buffer** 用于：
- 技术方案调整
- Bug 修复
- 需求变更

---

*开发计划创建时间：2026-02-14*
